---
---
<!DOCTYPE html>
<html lang="en-us">

{% include head.html %}

<body>

    {% include sidebar.html %}

    <div class="content" style="position: absolute;">
        Settings:<br>
        <input type="range" min="5" max="20" value="10" step="any" id="sizeInput">
        <label for="sizeInput">Size</label>
        <br>
        <input type="range" min="1" max="6" value="3" step="any" id="speedInput">
        <label for="speedInput">Speed</label>
        <br>
        <input type="color" value="#00AAFF" id="colourInput">
        <label for="colourInput">Colour</label>
        <br>
        <button type="button" onclick="addBall()" name="addBallButton">Add ball</button>
        <br>
        <button type="button" onclick="resetBall()" name= "resetButton">Reset</button>
        
        

    </div>

    <canvas id="myCanvas" width="10" height="10"></canvas>
 
    <script>
        // INITIALISATION
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        var drawFreq = 5 // milliseconds

        var ballRadius = parseFloat(sizeInput.value);
        var ballColour = colourInput.value;

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        class Ball {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                
                let angle = Math.random()*2*Math.PI;
                this.xAngle = Math.cos(angle);
                this.yAngle = Math.sin(angle);
            }

            drawBall() {

            }

            checkValid() {

            }

            
        }

        var ballArray = [Ball()];



        // USER INPUTS
        window.onresize = function () {
            canvas.height = window.innerHeight;
            canvas.width = window.innerWidth;
        }

        sizeInput.oninput = function () {
            ballRadius = parseFloat(sizeInput.value);
        }

        colourInput.oninput = function () {
            ballColour = colourInput.value;
        }

        speedInput.oninput = function () {
            var speed = parseFloat(speedInput.value);
        }

        // ADD BALL
        function addBall() {
            alert("add ball");
        }

        // RELOAD PAGE
        function resetBall() {
            location.reload()
            return
        }

        // MAIN LOOP
        function main() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);



            checkValid();
            drawBall();

            x += dx;
            y += dy;
        }

        // DRAW BALL
        function drawBall() {
            // Draw smoke trail
            for (var i = 2; i < 6; i++) {
                ctx.beginPath();
                var dx = xAngle * parseFloat(speedInput.value);
                var dy = yAngle * parseFloat(speedInput.value);

                var xoffset = dx*ballRadius/6;
                var yoffset = dy*ballRadius/6;
                ctx.arc(x - (4 * i * dx) - xoffset, y - (4 * i * dy) - yoffset, ballRadius / (1.5 * i), 0, Math.PI * 2);
                ctx.fillStyle = "#cccccc";
                ctx.fill();
                ctx.closePath();
            }

            // Draw ball
            ctx.beginPath();
            ctx.arc(x, y, ballRadius, 0, Math.PI * 2);
            ctx.fillStyle = ballColour;
            ctx.fill();
            ctx.closePath();
        }

        function checkValid() {
            if (x + dx + ballRadius >= canvas.width) {
                dx = -dx;
                x = canvas.width - ballRadius - 2;
            }
            if (x + dx - ballRadius <= 0) {
                dx = -dx;
                x = ballRadius + 2;
            }
            if (y + dy + ballRadius >= canvas.height) {
                dy = -dy;
                y = canvas.height - ballRadius - 2;
            }
            if (y + dy - ballRadius <= 0) {
                dy = -dy;
                y = ballRadius + 2;
            }
        }

        setInterval(main, drawFreq)

    </script>

</body>

</html>